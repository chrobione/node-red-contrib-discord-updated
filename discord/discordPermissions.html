a<script type="text/javascript">
  RED.nodes.registerType('discordPermissions', {
    category: 'discord · guild control',
    color: '#7289da',
    defaults: {
      name: {
        value: "",
        required: false
      },
      token: {
        value: "",
        required: true,
        type: "discord-token"
      }
    },
    inputs: 1,
    outputs: 1,
    icon: "font-awesome/fa-lock",
    label: function () {
      return this.name || "discordPermissions";
    }
  });
</script>
<script type="text/x-red" data-template-name="discordPermissions">
  <div class="form-row">
        <label for="node-input-token"><i class="icon-tag"></i> token</label>
        <input type="text" id="node-input-token" placeholder="token">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>
<script type="text/x-red" data-help-name="discordPermissions">
  <p><strong>What it does</strong> — Looks up which roles a member has and can also add or remove a single role.</p>
  <p><strong>When to use it</strong> — Build moderation tools, auto-assign onboarding roles, or check if someone has permission before running a command.</p>

  <h3>Inputs</h3>
  <dl class="message-properties">
    <dt>action <span class="property-type">string</span></dt>
    <dd><code>get</code> (default) to list roles, <code>set</code> to add a role, <code>remove</code> to take one away.</dd>
    <dt>user <span class="property-type">string | object</span></dt>
    <dd>The user id or object.</dd>
    <dt>guild <span class="property-type">string | object</span></dt>
    <dd>The guild to check against.</dd>
    <dt>role <span class="property-type">string | object</span></dt>
    <dd>Required for <code>set</code> or <code>remove</code>: the role to add/remove.</dd>
  </dl>

  <h3>Output</h3>
  <dl class="message-properties">
    <dt>payload <span class="property-type">array</span></dt>
    <dd>Role names the user currently has.</dd>
    <dt>user <span class="property-type">object</span></dt>
    <dd>The member information returned by Discord.</dd>
  </dl>

  <h3>Tips</h3>
  <ul>
    <li>Roles cascade—ensure your bot’s role is higher than the role you try to grant or remove.</li>
    <li>After changing roles, feed the result into <code>discordMessageManager</code> to notify the user or log channel.</li>
  </ul>
</script>
